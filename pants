#! /usr/bin/env python

# pants


import inspect
import os.path
import sys

# Add <root>/src/python to the import path so we can use standard Foursquare modules.
root_dir = os.path.dirname(inspect.getfile(inspect.currentframe()))
def path(*p): return os.path.join(root_dir, *p)
python_dir = path("src", "python")
sys.path.insert(0, python_dir)

from argparse import ArgumentParser
from foursquare.common.json_config import JsonConfig
from foursquare.toolchain.pants import run_pants, setup_pants_arg_parser
import os
import sys

parser = ArgumentParser(add_help=False)
setup_pants_arg_parser(parser)
parser.add_argument('goal', nargs='?')

config = JsonConfig(path('build-support/fsconfig.json'))

def main():
  args = args, other_args = parser.parse_known_args()
  args.passthrough = other_args
  exit(run_pants(root_dir, args.goal, args, config, quiet=not config.get('pants.printcmd', False)).result)
if __name__ == '__main__':
  main()
