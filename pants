#!/bin/bash
# Copyright 2015 Foursquare Labs Inc. All Rights Reserved.

set -e

if [[ -z "$SKIP_UPKEEP" ]]; then
  ./upkeep
fi

# Copied to root by upkeep.
source environ.sh

# Points to the pants.ini to use for pants config.
export PANTS_CONFIG_OVERRRIDE="$PANTS_CONFIG_OVERRIDE"

if [ -z "$PANTSBINARY" ]; then
  exec .pantsenv/bin/pants --print-exception-stacktrace "$@"
else
  export PYTHONPATH=src/python
  exec $PANTSBINARY --print-exception-stacktrace "$@"
fi
